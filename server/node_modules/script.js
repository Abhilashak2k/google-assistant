var express = require('express');
var mysql = require('mysql');

var app = express();

var connection = mysql.createPool({
	//properties
	connectionLimit : 50, 
	host :'localhost',
	user :'root',
	password: '',
	database : 'talking street',
})


app.get('/' , function(req, resp){
	connection.getConnection(function(error, tempCont){
		if(!!error)
		{
			tempCont.release();
			console.log('Error in query');
		}
		else
		{
			console.log('Successful query');
			tempCont.query("SELECT * FROM wp_posts", function(error, rows, fields)
			{
				tempCont.release();
				if(!!error){
					console.log("Error in query");
				}
				else{
					console.log("hi");
					resp.send(rows)
				}
			})
		}
	});
})

app.listen(1337);


